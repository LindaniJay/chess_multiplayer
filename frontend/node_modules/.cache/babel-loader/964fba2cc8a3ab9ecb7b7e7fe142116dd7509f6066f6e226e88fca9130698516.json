{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Chess}from'chess.js';import{Chessboard}from'react-chessboard';import'./Chessboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChessboardComponent=_ref=>{let{fen,moves,onMove,playerColor,turn}=_ref;const[game,setGame]=useState(new Chess());const[lastMoveSquares,setLastMoveSquares]=useState(null);// Initialize game from fen or reset\nuseEffect(()=>{const newGame=new Chess();if(fen){newGame.load(fen);}setGame(newGame);},[fen]);// Apply moves from server\nuseEffect(()=>{const newGame=new Chess(game.fen());let lastMove=null;moves.forEach(move=>{lastMove=newGame.move(move);});setGame(newGame);if(lastMove&&lastMove.from&&lastMove.to){setLastMoveSquares({from:lastMove.from,to:lastMove.to});}},[moves]);const handlePieceDrop=(sourceSquare,targetSquare)=>{// Only allow move if it's this player's turn\nif(!playerColor||playerColor!==turn)return false;const move=game.move({from:sourceSquare,to:targetSquare,promotion:'q'});if(move){onMove(move.san);setGame(new Chess(game.fen()));setLastMoveSquares({from:move.from,to:move.to});return true;}return false;};// Custom board colors for masculine theme\nconst boardColors={light:'#BCAAA4',// light brown\ndark:'#3E2723'// dark brown\n};// Highlight last move\nconst customSquareStyles=lastMoveSquares?{[lastMoveSquares.from]:{background:'#FFD700',boxShadow:'0 0 10px 2px #FFD700'},[lastMoveSquares.to]:{background:'#B22222',boxShadow:'0 0 10px 2px #B22222'}}:{};return/*#__PURE__*/_jsxs(\"div\",{className:\"chessboard-container\",children:[playerColor&&playerColor!==turn&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#FFD700',marginBottom:8,fontWeight:'bold'},children:\"Waiting for opponent's move...\"}),/*#__PURE__*/_jsx(Chessboard,{position:game.fen(),onPieceDrop:handlePieceDrop,boardWidth:350,boardOrientation:playerColor==='b'?'black':'white',customBoardStyle:{borderRadius:'8px',boxShadow:'0 2px 12px rgba(0,0,0,0.6)'},customDarkSquareStyle:{backgroundColor:boardColors.dark},customLightSquareStyle:{backgroundColor:boardColors.light},customSquareStyles:customSquareStyles,arePiecesDraggable:!!playerColor&&playerColor===turn})]});};export default ChessboardComponent;","map":{"version":3,"names":["React","useState","useEffect","Chess","Chessboard","jsx","_jsx","jsxs","_jsxs","ChessboardComponent","_ref","fen","moves","onMove","playerColor","turn","game","setGame","lastMoveSquares","setLastMoveSquares","newGame","load","lastMove","forEach","move","from","to","handlePieceDrop","sourceSquare","targetSquare","promotion","san","boardColors","light","dark","customSquareStyles","background","boxShadow","className","children","style","color","marginBottom","fontWeight","position","onPieceDrop","boardWidth","boardOrientation","customBoardStyle","borderRadius","customDarkSquareStyle","backgroundColor","customLightSquareStyle","arePiecesDraggable"],"sources":["C:/Users/Deviare User/OneDrive/Documents/chess-multiplayer/frontend/src/Chessboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Chess } from 'chess.js';\nimport { Chessboard } from 'react-chessboard';\nimport './Chessboard.css';\n\ninterface Props {\n  fen: string | null;\n  moves: string[];\n  onMove: (move: string) => void;\n  playerColor: 'w' | 'b' | null;\n  turn: 'w' | 'b';\n}\n\nconst ChessboardComponent: React.FC<Props> = ({ fen, moves, onMove, playerColor, turn }) => {\n  const [game, setGame] = useState(new Chess());\n  const [lastMoveSquares, setLastMoveSquares] = useState<{from: string, to: string} | null>(null);\n\n  // Initialize game from fen or reset\n  useEffect(() => {\n    const newGame = new Chess();\n    if (fen) {\n      newGame.load(fen);\n    }\n    setGame(newGame);\n  }, [fen]);\n\n  // Apply moves from server\n  useEffect(() => {\n    const newGame = new Chess(game.fen());\n    let lastMove: any = null;\n    moves.forEach((move) => {\n      lastMove = newGame.move(move);\n    });\n    setGame(newGame);\n    if (lastMove && lastMove.from && lastMove.to) {\n      setLastMoveSquares({ from: lastMove.from, to: lastMove.to });\n    }\n  }, [moves]);\n\n  const handlePieceDrop = (sourceSquare: string, targetSquare: string) => {\n    // Only allow move if it's this player's turn\n    if (!playerColor || playerColor !== turn) return false;\n    const move = game.move({ from: sourceSquare, to: targetSquare, promotion: 'q' });\n    if (move) {\n      onMove(move.san);\n      setGame(new Chess(game.fen()));\n      setLastMoveSquares({ from: move.from, to: move.to });\n      return true;\n    }\n    return false;\n  };\n\n  // Custom board colors for masculine theme\n  const boardColors = {\n    light: '#BCAAA4', // light brown\n    dark: '#3E2723',  // dark brown\n  };\n\n  // Highlight last move\n  const customSquareStyles = lastMoveSquares\n    ? {\n        [lastMoveSquares.from]: {\n          background: '#FFD700',\n          boxShadow: '0 0 10px 2px #FFD700',\n        },\n        [lastMoveSquares.to]: {\n          background: '#B22222',\n          boxShadow: '0 0 10px 2px #B22222',\n        },\n      }\n    : {};\n\n  return (\n    <div className=\"chessboard-container\">\n      {playerColor && playerColor !== turn && (\n        <div style={{ color: '#FFD700', marginBottom: 8, fontWeight: 'bold' }}>\n          Waiting for opponent's move...\n        </div>\n      )}\n      <Chessboard\n        position={game.fen()}\n        onPieceDrop={handlePieceDrop}\n        boardWidth={350}\n        boardOrientation={playerColor === 'b' ? 'black' : 'white'}\n        customBoardStyle={{\n          borderRadius: '8px',\n          boxShadow: '0 2px 12px rgba(0,0,0,0.6)',\n        }}\n        customDarkSquareStyle={{ backgroundColor: boardColors.dark }}\n        customLightSquareStyle={{ backgroundColor: boardColors.light }}\n        customSquareStyles={customSquareStyles}\n        arePiecesDraggable={!!playerColor && playerColor === turn}\n      />\n    </div>\n  );\n};\n\nexport default ChessboardComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}